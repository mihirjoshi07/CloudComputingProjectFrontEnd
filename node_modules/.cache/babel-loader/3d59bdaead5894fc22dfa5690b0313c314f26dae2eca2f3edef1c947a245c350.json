{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Shopkeeper_CustomerRetrieval=()=>{const[phoneNumber,setPhoneNumber]=useState('');const[loyaltyPoints,setLoyaltyPoints]=useState(null);const[error,setError]=useState('');const[redirect,setRedirect]=useState(false);const handleRetrievePoints=async()=>{try{const response=await axios.post('/api/retrieve-loyalty-points',{phoneNumber});if(response.data.success){const loyaltyPointsEarned=Math.floor(response.data.loyaltyPoints/1)*10;setLoyaltyPoints(response.data.loyaltyPoints);setError('');setRedirect(true);}else{setLoyaltyPoints(null);setError(response.data.message||'Error retrieving loyalty points');}}catch(error){console.error('Error during loyalty points retrieval:',error);setLoyaltyPoints(null);setError('An error occurred during loyalty points retrieval');}};if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:\"/shopkeeper-page/\".concat(Math.floor(loyaltyPoints/1)*10)});}return/*#__PURE__*/_jsxs(\"div\",{className:\"customer-retrieval-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"header\",children:\"Customer Loyalty Points Retrieval\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Customer Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"input\",value:phoneNumber,onChange:e=>setPhoneNumber(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",onClick:handleRetrievePoints,children:\"Retrieve Loyalty Points\"})]}),loyaltyPoints!==null&&/*#__PURE__*/_jsx(\"div\",{className:\"loyalty-points-info\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"info-item\",children:[\"Loyalty Points: \",loyaltyPoints]})}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error})]});};export default Shopkeeper_CustomerRetrieval;","map":{"version":3,"names":["React","useState","axios","Navigate","jsx","_jsx","jsxs","_jsxs","Shopkeeper_CustomerRetrieval","phoneNumber","setPhoneNumber","loyaltyPoints","setLoyaltyPoints","error","setError","redirect","setRedirect","handleRetrievePoints","response","post","data","success","loyaltyPointsEarned","Math","floor","message","console","to","concat","className","children","type","value","onChange","e","target","required","onClick"],"sources":["E:/Downloads/Cloud_Computing-main/src/Shopkeeper_CustomerRetrieval.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Navigate } from 'react-router-dom';\n\nconst Shopkeeper_CustomerRetrieval = () => {\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [loyaltyPoints, setLoyaltyPoints] = useState(null);\n  const [error, setError] = useState('');\n  const [redirect, setRedirect] = useState(false);\n\n  const handleRetrievePoints = async () => {\n    try {\n      const response = await axios.post('/api/retrieve-loyalty-points', {\n        phoneNumber,\n      });\n\n      if (response.data.success) {\n        const loyaltyPointsEarned = Math.floor(response.data.loyaltyPoints / 1) * 10;\n\n        setLoyaltyPoints(response.data.loyaltyPoints);\n        setError('');\n        setRedirect(true);\n      } else {\n        setLoyaltyPoints(null);\n        setError(response.data.message || 'Error retrieving loyalty points');\n      }\n    } catch (error) {\n      console.error('Error during loyalty points retrieval:', error);\n      setLoyaltyPoints(null);\n      setError('An error occurred during loyalty points retrieval');\n    }\n  };\n\n  if (redirect) {\n    return <Navigate to={`/shopkeeper-page/${Math.floor(loyaltyPoints / 1) * 10}`} />;\n  }\n\n  return (\n    <div className=\"customer-retrieval-container\">\n      <h2 className=\"header\">Customer Loyalty Points Retrieval</h2>\n      <div>\n        <label className=\"label\">Customer Phone Number:</label>\n        <input\n          type=\"tel\"\n          className=\"input\"\n          value={phoneNumber}\n          onChange={(e) => setPhoneNumber(e.target.value)}\n          required\n        />\n        <button className=\"submit-button\" onClick={handleRetrievePoints}>\n          Retrieve Loyalty Points\n        </button>\n      </div>\n      {loyaltyPoints !== null && (\n        <div className=\"loyalty-points-info\">\n          <p className=\"info-item\">Loyalty Points: {loyaltyPoints}</p>\n        </div>\n      )}\n      {error && <p className=\"error-message\">{error}</p>}\n    </div>\n  );\n};\n\nexport default Shopkeeper_CustomerRetrieval;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}